CREATE EXTENSION pg_dms CASCADE;
NOTICE:  installing required extension "uuid-ossp"
CREATE EXTENSION pg_abris CASCADE;
CREATE TABLE public.test (
  KEY pg_dms_d NOT NULL,
  num integer
)
WITH (OIDS = FALSE) TABLESPACE pg_default;
INSERT INTO public.test (KEY, num)
  VALUES ('6bdc3400-00a9-4116-bb6d-81a2259cff96,050915a9-2e53-42ef-b43c-4eaefc9418bd', 1);
select * from test;
                                    key                                    | num 
---------------------------------------------------------------------------+-----
 6bdc3400-00a9-4116-bb6d-81a2259cff96,050915a9-2e53-42ef-b43c-4eaefc9418bd |   1
(1 row)

CREATE TABLE public.d (
  KEY pg_dms_did NOT NULL,
  num integer,
  CONSTRAINT d_pkey PRIMARY KEY (KEY))
WITH (OIDS = FALSE) TABLESPACE pg_default;
CREATE SEQUENCE public.dup_key_seq
  INCREMENT 1 START 1
  MINVALUE 1
  MAXVALUE 2147483647
  CACHE 1;
--CREATE INDEX products_idx
--    ON public.d USING btree
--    (key)  
--    TABLESPACE pg_default;
CREATE TABLE public.dup (
  KEY integer NOT NULL DEFAULT nextval('dup_key_seq'::regclass),
  d pg_dms_family_ref,
  name text COLLATE pg_catalog. "default",
  CONSTRAINT dup_pkey PRIMARY KEY (KEY),
  CONSTRAINT dup_d_fkey FOREIGN KEY (d) REFERENCES public.d (KEY) MATCH SIMPLE ON
  UPDATE
    NO ACTION ON DELETE NO ACTION
)
  WITH (OIDS = FALSE) TABLESPACE pg_default;
CREATE SEQUENCE public.dn_key_seq
  INCREMENT 1 START 1
  MINVALUE 1
  MAXVALUE 2147483647
  CACHE 1;
CREATE TABLE public.dn (
  KEY integer NOT NULL DEFAULT nextval('dn_key_seq'::regclass),
  d pg_dms_ref,
  name text COLLATE pg_catalog. "default",
  CONSTRAINT dn_pkey PRIMARY KEY (KEY)
  , CONSTRAINT dn_d_fkey FOREIGN KEY (d) REFERENCES public.d (KEY) MATCH SIMPLE ON
  UPDATE
  NO ACTION ON DELETE NO ACTION
)
  WITH (OIDS = FALSE) TABLESPACE pg_default;
--CREATE INDEX dn_idx_d
--    ON public.dn USING btree
--    (d)
--    TABLESPACE pg_default;
INSERT INTO public.d (KEY, num)
  VALUES (null::uuid, 1);
INSERT INTO public.d (KEY, num)
  VALUES ((
      SELECT
        key::uuid
      FROM
        public.d
      WHERE
        num = 1), 2);
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
SELECT
  public.pg_dms_set_action ('public.d', (
      SELECT
        KEY
      FROM
        d
      WHERE
        num = 2), 'created'::pg_dms_actiontype, 'Yra');
NOTICE:  Действие 'created' создается автоматически
 pg_dms_set_action 
-------------------
 f
(1 row)

SELECT
  public.pg_dms_set_action ('public.d', (
      SELECT
        KEY
      FROM
        d
      WHERE
        num = 2), 'agreed'::pg_dms_actiontype, '--');
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--100
NOTICE:  note--100
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status work
NOTICE:  note--100
NOTICE:  note--100
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--100
NOTICE:  note--100
 pg_dms_set_action 
-------------------
 t
(1 row)

SELECT
  public.pg_dms_set_action ('public.d', (
      SELECT
        KEY
      FROM
        d
      WHERE
        num = 2), 'approved'::pg_dms_actiontype, '---');
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status project
NOTICE:  note--100
NOTICE:  note--100
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status document
NOTICE:  note--100
NOTICE:  note--100
 pg_dms_set_action 
-------------------
 t
(1 row)

INSERT INTO public.d (KEY, num)
  VALUES ((
      SELECT
        key::uuid
      FROM
        public.d
      WHERE
        num = 1), 3);
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status work
SELECT
  public.pg_dms_set_action ('public.d', (
      SELECT
        KEY
      FROM
        d
      WHERE
        num = 3), 'agreed'::pg_dms_actiontype, '--');
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status work
NOTICE:  note--100
NOTICE:  note--100
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status work
NOTICE:  note--100
NOTICE:  note--100
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status project
NOTICE:  note--100
NOTICE:  note--100
 pg_dms_set_action 
-------------------
 t
(1 row)

SELECT
  public.pg_dms_set_action ('public.d', (
      SELECT
        KEY
      FROM
        d
      WHERE
        num = 3), 'approved'::pg_dms_actiontype, NULL);
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status project
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status project
NOTICE:  note--100
NOTICE:  note--100
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status archival
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status archival
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status document b.status archival
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status archival
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status document b.status archival
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status archival
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status project b.status archival
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  a.status work b.status archival
NOTICE:  note--100
NOTICE:  note--100
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status document b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status work b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status project b.status document
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  a.status archival b.status document
NOTICE:  note--100
NOTICE:  note--100
 pg_dms_set_action 
-------------------
 t
(1 row)

select * from d;
                                                                                                                                                                                                                                  key                                                                                                                                                                                                                                   | num 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----
 (ec277fa9-2a28-477a-b5dc-483550284967,ec277fa9-2a28-477a-b5dc-483550284967,work,"Sat Apr 21 16:23:51.122613 2018 PDT",,,,"[0:0]={""(\\""Sat Apr 21 16:23:51.122613 2018 PDT\\"",postgres,created,)""}")                                                                                                                                                                                                                                                                |   1
 (ec277fa9-2a28-477a-b5dc-483550284967,64091e57-45dd-4bf4-b73e-69077d037f18,archival,"Sat Apr 21 16:23:51.124622 2018 PDT",c81e728d-9d4c-2f63-6f06-7f89cc14862c,"Sat Apr 21 16:23:51.142185 2018 PDT","Sat Apr 21 16:23:51.155367 2018 PDT","[0:2]={""(\\""Sat Apr 21 16:23:51.124622 2018 PDT\\"",postgres,created,)"",""(\\""Sat Apr 21 16:23:51.127484 2018 PDT\\"",postgres,agreed,--)"",""(\\""Sat Apr 21 16:23:51.142185 2018 PDT\\"",postgres,approved,---)""}") |   2
 (ec277fa9-2a28-477a-b5dc-483550284967,0b4d4474-0c6a-429e-9616-9c3d330e5ab8,document,"Sat Apr 21 16:23:51.148049 2018 PDT",eccbc87e-4b5c-e2fe-2830-8fd9f2a7baf3,"Sat Apr 21 16:23:51.155367 2018 PDT",,"[0:2]={""(\\""Sat Apr 21 16:23:51.148049 2018 PDT\\"",postgres,created,)"",""(\\""Sat Apr 21 16:23:51.149757 2018 PDT\\"",postgres,agreed,--)"",""(\\""Sat Apr 21 16:23:51.155367 2018 PDT\\"",postgres,approved,)""}")                                         |   3
(3 rows)

INSERT INTO public.dup (d, name)
  VALUES ((
      SELECT
        key::uuid
      FROM
        public.d
      WHERE
        num = 1), 'a1');
NOTICE:  note--12
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 a.status document
NOTICE:  return-- 0
NOTICE:  note--12
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status work
NOTICE:  return-- 0
NOTICE:  note--12
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status project
NOTICE:  return-- 0
NOTICE:  note--12
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status document
NOTICE:  return-- 0
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status document
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status project
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status project
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 a.status archival
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 a.status document
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 a.status work
NOTICE:  note--7 return t
INSERT INTO public.dn (d, name)
  VALUES ((
      SELECT
        key::text
      FROM
        public.d
      WHERE
        num = 1), 'a1');
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id ec277fa9-2a28-477a-b5dc-483550284967
NOTICE:  note--211 -1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id ec277fa9-2a28-477a-b5dc-483550284967
NOTICE:  note--211 -1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id ec277fa9-2a28-477a-b5dc-483550284967
NOTICE:  note--211 0
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id ec277fa9-2a28-477a-b5dc-483550284967
NOTICE:  note--211 -1
NOTICE:  note--206
INSERT INTO public.dn (d, name)
  VALUES ((
      SELECT
        key::text
      FROM
        public.d
      WHERE
        num = 2), 'a2');
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  note--211 0
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  note--211 -1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  note--211 -1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  note--211 0
NOTICE:  note--206
NOTICE:  note--206
NOTICE:  note--206
INSERT INTO public.dn (d, name)
  VALUES ((
      SELECT
        key::text
      FROM
        public.d
      WHERE
        num = 3), 'a3');
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  note--211 1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  note--211 0
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  note--211 0
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  note--211 0
NOTICE:  note--206
NOTICE:  note--206
NOTICE:  note--206
NOTICE:  note--206
        
------------------------------------------------
SELECT   d.num FROM  d,  dup WHERE  d.key = dup.d;
NOTICE:  note--12
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 a.status document
NOTICE:  return-- 0
NOTICE:  note--12
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status work
NOTICE:  return-- 0
NOTICE:  note--12
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status project
NOTICE:  return-- 0
NOTICE:  note--12
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status document
NOTICE:  return-- 0
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status document
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status project
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status project
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 a.status archival
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 a.status document
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 a.status work
NOTICE:  note--7 return t
 num 
-----
   3
   2
   1
(3 rows)

SELECT   d.num FROM   d,   dup WHERE   dup.d = d.key;
NOTICE:  note--13
NOTICE:  note--13
NOTICE:  note--13
 num 
-----
   3
(1 row)

select d.num from d  left join dup on  d.key = dup.d;
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 a.status work
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 a.status archival
NOTICE:  note--7 return t
NOTICE:  note--7
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 a.status document
NOTICE:  note--7 return t
 num 
-----
   1
   2
   3
(3 rows)

SELECT   d.num FROM   d,   dn WHERE   d.key = dn.d;
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id ec277fa9-2a28-477a-b5dc-483550284967
NOTICE:  note--211 -1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id ec277fa9-2a28-477a-b5dc-483550284967
NOTICE:  note--211 -1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id ec277fa9-2a28-477a-b5dc-483550284967 b.id ec277fa9-2a28-477a-b5dc-483550284967
NOTICE:  note--211 0
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id ec277fa9-2a28-477a-b5dc-483550284967
NOTICE:  note--211 -1
NOTICE:  note--206
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  note--211 0
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  note--211 -1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  note--211 -1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 64091e57-45dd-4bf4-b73e-69077d037f18
NOTICE:  note--211 0
NOTICE:  note--206
NOTICE:  note--206
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  note--211 1
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  note--211 0
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  note--211 0
NOTICE:  note--211
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family ec277fa9-2a28-477a-b5dc-483550284967, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8
NOTICE:  note--211 0
NOTICE:  note--206
NOTICE:  note--206
 num 
-----
   1
   2
   3
(3 rows)

SELECT   d.num FROM   d,   dn WHERE   dn.d = d.key;
NOTICE:  note--212
NOTICE:  note--212
NOTICE:  note--212
NOTICE:  note--212
NOTICE:  note--212
NOTICE:  note--212
NOTICE:  note--212
NOTICE:  note--212
NOTICE:  note--212
 num 
-----
   1
   2
   3
(3 rows)

INSERT INTO public.d (KEY, num)
  VALUES ('2604bebd-3369-423c-be17-9e27e50c823b'::uuid, 4);
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family 2604bebd-3369-423c-be17-9e27e50c823b, a.id 64091e57-45dd-4bf4-b73e-69077d037f18 b.id 98b877b9-c11b-422d-9637-c08a42bd5e43
NOTICE:  a.status document b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family 2604bebd-3369-423c-be17-9e27e50c823b, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 98b877b9-c11b-422d-9637-c08a42bd5e43
NOTICE:  a.status work b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family 2604bebd-3369-423c-be17-9e27e50c823b, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 98b877b9-c11b-422d-9637-c08a42bd5e43
NOTICE:  a.status project b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family 2604bebd-3369-423c-be17-9e27e50c823b, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 98b877b9-c11b-422d-9637-c08a42bd5e43
NOTICE:  a.status document b.status work
NOTICE:  note--105
NOTICE:  a.family ec277fa9-2a28-477a-b5dc-483550284967 b.family 2604bebd-3369-423c-be17-9e27e50c823b, a.id 0b4d4474-0c6a-429e-9616-9c3d330e5ab8 b.id 98b877b9-c11b-422d-9637-c08a42bd5e43
NOTICE:  a.status document b.status work
SELECT
  count(*)
FROM
  public.d;
 count 
-------
     4
(1 row)

SELECT
  num
FROM
  public.d
WHERE
  KEY = 'document'::pg_dms_status;
 num 
-----
   3
(1 row)

--Вывод дествий по всем строкам
--Результат с плановой ошибкой из-за времени	
--SELECT pg_dms_get_actions(key),pg_dms_get_hash(key),pg_dms_get_status(key) FROM d;	
--Вывод статуса строк
SELECT
  pg_dms_get_status (KEY)
FROM
  d;
 pg_dms_get_status 
-------------------
 Материал
 Архив
 Документ
 Материал
(4 rows)

--Вывод только действующих документов
SELECT
  num,
  pg_dms_get_status (KEY)
FROM
  d
WHERE
  pg_dms_is_document (KEY);
 num | pg_dms_get_status 
-----+-------------------
   3 | Документ
(1 row)

--Вывод только  документов на дату
--SELECT num, pg_dms_get_status(key) FROM d WHERE pg_dms_is_document(key, now()-'20 milliseconds'::interval);
--Вывод записей одного семейства
SELECT
  num,
  pg_dms_get_status (KEY)
FROM
  d
WHERE
  pg_dms_is_family (KEY, (
      SELECT
        KEY
      FROM
        d
      WHERE
        num = 1));
 num | pg_dms_get_status 
-----+-------------------
   1 | Материал
   2 | Архив
   3 | Документ
(3 rows)

SELECT
  num,
  pg_dms_get_status (KEY)
FROM
  d
WHERE
  pg_dms_is_family (KEY, (
      SELECT
        key::text
      FROM
        d
      WHERE
        num = 1));
 num | pg_dms_get_status 
-----+-------------------
   1 | Материал
   2 | Архив
   3 | Документ
(3 rows)

--Вывод последных записей
SELECT
  num
FROM
  d
WHERE
  pg_dms_is_last ('public.d', KEY);
 num 
-----
   1
   4
(2 rows)

